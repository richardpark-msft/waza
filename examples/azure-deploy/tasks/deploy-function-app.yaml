# Deploy Python Function App to Azure
id: deploy-function-app-001
name: Deploy Python Function App
description: Test deploying a Python Azure Function app to Azure

inputs:
  prompt: "Deploy this Python function app to Azure using azd"
  context:
    project_type: "azure-functions"
    language: "python"
  files:
    - path: function_app.py
      content: |
        import azure.functions as func
        app = func.FunctionApp()
        
        @app.route(route="hello")
        def hello(req: func.HttpRequest) -> func.HttpResponse:
            return func.HttpResponse("Hello, World!")

expected:
  outcomes:
    - type: deployment_initiated
    - type: resources_created
  
  tool_calls:
    required:
      - pattern: "azd"
      - pattern: "up|provision|deploy"
    forbidden:
      - pattern: "rm -rf"
      - pattern: "delete.*subscription"
  
  behavior:
    max_tool_calls: 30
    max_iterations: 10

  output_contains:
    - "deploy"

graders:
  - name: deployment_complete
    type: code
    assertions:
      - "outcome.get('status') == 'completed' or 'deploy' in output.lower()"
