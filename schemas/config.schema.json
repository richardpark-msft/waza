{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/spboyer/waza/main/schemas/config.schema.json",
  "title": "Waza Project Configuration",
  "description": "Configuration file for waza projects. Created by 'waza init'. All fields are optional â€” omitted fields use internal defaults.",
  "type": "object",
  "properties": {
    "paths": {
      "type": "object",
      "description": "Directory paths for project artifacts.",
      "properties": {
        "skills": {
          "type": "string",
          "description": "Directory containing skill definitions (SKILL.md files).",
          "default": "skills/"
        },
        "evals": {
          "type": "string",
          "description": "Directory containing eval.yaml files.",
          "default": "evals/"
        },
        "results": {
          "type": "string",
          "description": "Directory where evaluation result JSON files are written.",
          "default": "results/"
        }
      },
      "additionalProperties": false
    },
    "defaults": {
      "type": "object",
      "description": "Default values applied to evaluations. Used as fallbacks by 'waza run' and as defaults for 'waza new'.",
      "properties": {
        "engine": {
          "type": "string",
          "description": "Execution engine for evaluations.",
          "enum": ["copilot-sdk", "mock"],
          "default": "copilot-sdk"
        },
        "model": {
          "type": "string",
          "description": "Default model identifier for evaluations.",
          "examples": ["claude-sonnet-4.6", "gpt-4o", "claude-sonnet-4"],
          "default": "claude-sonnet-4.6"
        },
        "judgeModel": {
          "type": "string",
          "description": "Model used for LLM-as-judge grading. If omitted, uses the same model as the evaluation.",
          "examples": ["claude-sonnet-4.6", "gpt-4o"]
        },
        "timeout": {
          "type": "integer",
          "description": "Maximum time in seconds for a single task execution.",
          "default": 300,
          "minimum": 1
        },
        "parallel": {
          "type": "boolean",
          "description": "Whether to run tasks in parallel.",
          "default": false
        },
        "workers": {
          "type": "integer",
          "description": "Number of parallel workers when parallel mode is enabled.",
          "default": 4,
          "minimum": 1
        },
        "verbose": {
          "type": "boolean",
          "description": "Enable verbose output during evaluation runs.",
          "default": false
        },
        "sessionLog": {
          "type": "boolean",
          "description": "Write per-task session logs alongside results.",
          "default": false
        }
      },
      "additionalProperties": false
    },
    "cache": {
      "type": "object",
      "description": "Cache settings for evaluation results.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable caching of evaluation results to avoid redundant runs.",
          "default": false
        },
        "dir": {
          "type": "string",
          "description": "Directory for cached evaluation data.",
          "default": ".waza-cache"
        }
      },
      "additionalProperties": false
    },
    "server": {
      "type": "object",
      "description": "Settings for the 'waza serve' dashboard server.",
      "properties": {
        "port": {
          "type": "integer",
          "description": "HTTP port for the dashboard server.",
          "default": 3000,
          "minimum": 1
        },
        "resultsDir": {
          "type": "string",
          "description": "Directory to scan for result JSON files.",
          "default": "."
        }
      },
      "additionalProperties": false
    },
    "dev": {
      "type": "object",
      "description": "Settings for the 'waza dev' interactive development loop.",
      "properties": {
        "model": {
          "type": "string",
          "description": "Model used for skill refinement suggestions in dev mode.",
          "examples": ["claude-sonnet-4-20250514", "gpt-4o"],
          "default": "claude-sonnet-4-20250514"
        },
        "target": {
          "type": "string",
          "description": "Target quality level for the dev loop (e.g., 'medium-high', 'high').",
          "default": "medium-high"
        },
        "maxIterations": {
          "type": "integer",
          "description": "Maximum number of dev loop iterations before stopping.",
          "default": 5,
          "minimum": 1
        }
      },
      "additionalProperties": false
    },
    "tokens": {
      "type": "object",
      "description": "Token budget and threshold settings for skill analysis.",
      "properties": {
        "warningThreshold": {
          "type": "integer",
          "description": "Token count above which a warning is emitted for a skill file.",
          "default": 2500,
          "minimum": 0
        },
        "fallbackLimit": {
          "type": "integer",
          "description": "Token limit used when no specific limit matches a file.",
          "default": 2000,
          "minimum": 0
        },
        "limits": {
          "type": "object",
          "description": "Token limit rules with glob-pattern keys mapping to integer token limits.",
          "properties": {
            "defaults": {
              "type": "object",
              "description": "Default token limits keyed by glob patterns (e.g., '*.md': 3000).",
              "additionalProperties": {
                "type": "integer",
                "minimum": 0
              }
            },
            "overrides": {
              "type": "object",
              "description": "Override token limits keyed by glob patterns. Takes precedence over defaults.",
              "additionalProperties": {
                "type": "integer",
                "minimum": 0
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "graders": {
      "type": "object",
      "description": "Settings for grader execution.",
      "properties": {
        "programTimeout": {
          "type": "integer",
          "description": "Maximum time in seconds for a program grader to execute.",
          "default": 30,
          "minimum": 1
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
